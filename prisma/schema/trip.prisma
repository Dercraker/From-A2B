model Trip {
  id             String   @id @unique @default(cuid())
  slug           String   @unique
  organizationId String
  name           String
  startDate      DateTime
  endDate        DateTime
  description    String?
  image          String?

  Organization Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  steps        Step[]

  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  deletedAt DateTime?
  Road      Road[]
}

model Step {
  id     String @id @unique @default(cuid())
  slug   String @unique
  tripId String
  trip   Trip?  @relation(fields: [tripId], references: [id], onDelete: Cascade)

  rank          Int
  name          String
  startDate     DateTime?
  endDate       DateTime?
  description   String?
  latitude      Decimal
  longitude     Decimal
  placeId       String        @default("")
  transportMode TransportMode @default(Car)

  road   Road?
  roadId String? @unique
}

model Road {
  id       String @id @unique @default(cuid())
  distance Int
  duration Int
  polyline String

  step   Step   @relation(fields: [stepId], references: [id], onDelete: Cascade)
  stepId String @unique

  trip   Trip?  @relation(fields: [tripId], references: [id])
  tripId String
}

enum TransportMode {
  Walk
  Bike
  Car
  Boat
  Plane
}
