model Organization {
  id               String           @id @default(nanoid(11))
  slug             String           @unique @default(nanoid(6))
  name             String
  image            String?
  planId           String           @default("FREE")
  plan             OrganizationPlan @relation(fields: [planId], references: [id], onDelete: Cascade)
  email            String
  stripeCustomerId String?

  members OrganizationMembership[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  trips Trip[]

  @@index([slug])
}

model OrganizationMembership {
  id    String                       @id @default(nanoid(11))
  roles OrganizationMembershipRole[] @default([MEMBER])

  userId String
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  organizationId String
  organization   Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("Membership")
}

enum OrganizationMembershipRole {
  OWNER
  ADMIN
  MEMBER
}

model OrganizationPlan {
  id             String @id @default(nanoid(11))
  name           String
  maximumMembers Int    @default(1)

  organization Organization[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
